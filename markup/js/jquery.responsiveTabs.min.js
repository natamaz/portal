!function(a,b,c){function d(b,c){this.element=b,this.$element=a(b),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=a({}),this.options=a.extend({},e,c),this.init()}var e={active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,fluidHeight:!0,scrollToAccordion:!1,scrollToAccordionOnLoad:!0,scrollToAccordionOffset:0,accordionTabElement:"<div></div>",navigationContainer:"",click:function(){},activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",container:"r-tabs",ul:"r-tabs-nav",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};d.prototype.init=function(){var c=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),a(b).on("resize",function(a){c._setState(a),!0!==c.options.fluidHeight&&c._equaliseHeights()}),a(b).on("hashchange",function(a){var d=c._getTabRefBySelector(b.location.hash),e=c._getTab(d);d>=0&&!e._ignoreHashChange&&!e.disabled&&c._openTab(a,c._getTab(d),!0)}),!1!==this.options.rotate&&this.startRotation(),!0!==this.options.fluidHeight&&c._equaliseHeights(),this.$element.bind("tabs-click",function(a,b){c.options.click.call(this,a,b)}),this.$element.bind("tabs-activate",function(a,b){c.options.activate.call(this,a,b)}),this.$element.bind("tabs-deactivate",function(a,b){c.options.deactivate.call(this,a,b)}),this.$element.bind("tabs-activate-state",function(a,b){c.options.activateState.call(this,a,b)}),this.$element.bind("tabs-load",function(a){var b;c._setState(a),!0===c.options.startCollapsed||"accordion"===c.options.startCollapsed&&"accordion"===c.state||(b=c._getStartTab(),c._openTab(a,b),c.options.load.call(this,a,b))}),this.$element.trigger("tabs-load")},d.prototype._loadElements=function(){var b=this,c=""===b.options.navigationContainer?this.$element.children("ul:first"):this.$element.find(b.options.navigationContainer).children("ul:first"),d=[],e=0;return this.$element.addClass(b.options.classes.container),c.addClass(b.options.classes.ul),a("li",c).each(function(){var c,f,g,h,i,j=a(this),k=j.hasClass(b.options.classes.stateExcluded);if(!k){c=a("a",j),i=c.attr("href"),f=a(i),g=a(b.options.accordionTabElement).insertBefore(f),h=a("<a></a>").attr("href",i).html(c.html()).appendTo(g);var l={_ignoreHashChange:!1,id:e,disabled:-1!==a.inArray(e,b.options.disabled),tab:a(this),anchor:a("a",j),panel:f,selector:i,accordionTab:g,accordionAnchor:h,active:!1};e++,d.push(l)}}),d},d.prototype._loadClasses=function(){for(var a=0;a<this.tabs.length;a++)this.tabs[a].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[a].anchor.addClass(this.options.classes.anchor),this.tabs[a].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[a].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[a].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[a].disabled&&(this.tabs[a].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[a].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},d.prototype._loadEvents=function(){for(var a=this,c=function(c){var d=a._getCurrentTab(),e=c.data.tab;c.preventDefault(),e.tab.trigger("tabs-click",e),e.disabled||(a.options.setHash&&(history.pushState?(b.location.origin||(b.location.origin=b.location.protocol+"//"+b.location.hostname+(b.location.port?":"+b.location.port:"")),history.pushState(null,null,b.location.origin+b.location.pathname+b.location.search+e.selector)):b.location.hash=e.selector),c.data.tab._ignoreHashChange=!0,(d!==e||a._isCollapisble())&&(a._closeTab(c,d),d===e&&a._isCollapisble()||a._openTab(c,e,!1,!0)))},d=0;d<this.tabs.length;d++)this.tabs[d].anchor.on(a.options.event,{tab:a.tabs[d]},c),this.tabs[d].accordionAnchor.on(a.options.event,{tab:a.tabs[d]},c)},d.prototype._getStartTab=function(){var a=this._getTabRefBySelector(b.location.hash);return a>=0&&!this._getTab(a).disabled?this._getTab(a):this.options.active>0&&!this._getTab(this.options.active).disabled?this._getTab(this.options.active):this._getTab(0)},d.prototype._setState=function(b){var d,e=a("ul:first",this.$element),f=this.state,g="string"==typeof this.options.startCollapsed;e.is(":visible")?this.state="tabs":this.state="accordion",this.state!==f&&(this.$element.trigger("tabs-activate-state",{oldState:f,newState:this.state}),f&&g&&this.options.startCollapsed!==this.state&&this._getCurrentTab()===c&&(d=this._getStartTab(b),this._openTab(b,d)))},d.prototype._openTab=function(b,c,d,e){var f,g=this;d&&this._closeTab(b,this._getCurrentTab()),e&&this.rotateInterval>0&&this.stopRotation(),c.active=!0,c.tab.removeClass(g.options.classes.stateDefault).addClass(g.options.classes.stateActive),c.accordionTab.removeClass(g.options.classes.stateDefault).addClass(g.options.classes.stateActive),g._doTransition(c.panel,g.options.animation,"open",function(){var d="tabs-load"!==b.type||g.options.scrollToAccordionOnLoad;c.panel.removeClass(g.options.classes.stateDefault).addClass(g.options.classes.stateActive),"accordion"!==g.getState()||!g.options.scrollToAccordion||g._isInView(c.accordionTab)&&"default"===g.options.animation||!d||(f=c.accordionTab.offset().top-g.options.scrollToAccordionOffset,"default"!==g.options.animation&&g.options.duration>0?a("html, body").animate({scrollTop:f},g.options.duration):a("html, body").scrollTop(f))}),this.$element.trigger("tabs-activate",c)},d.prototype._closeTab=function(a,b){var d,e=this,f="string"==typeof e.options.animationQueue;b!==c&&(d=!(!f||e.getState()!==e.options.animationQueue)||!f&&e.options.animationQueue,b.active=!1,b.tab.removeClass(e.options.classes.stateActive).addClass(e.options.classes.stateDefault),e._doTransition(b.panel,e.options.animation,"close",function(){b.accordionTab.removeClass(e.options.classes.stateActive).addClass(e.options.classes.stateDefault),b.panel.removeClass(e.options.classes.stateActive).addClass(e.options.classes.stateDefault)},!d),this.$element.trigger("tabs-deactivate",b))},d.prototype._doTransition=function(a,b,c,d,e){var f,g=this;switch(b){case"slide":f="open"===c?"slideDown":"slideUp";break;case"fade":f="open"===c?"fadeIn":"fadeOut";break;default:f="open"===c?"show":"hide",g.options.duration=0}this.$queue.queue("responsive-tabs",function(e){a[f]({duration:g.options.duration,complete:function(){d.call(a,b,c),e()}})}),("open"===c||e)&&this.$queue.dequeue("responsive-tabs")},d.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},d.prototype._getTab=function(a){return this.tabs[a]},d.prototype._getTabRefBySelector=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].selector===a)return b;return-1},d.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},d.prototype._getNextTabRef=function(a){var b=a||this._getCurrentTabRef(),c=b===this.tabs.length-1?0:b+1;return this._getTab(c).disabled?this._getNextTabRef(c):c},d.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},d.prototype._getCurrentTabRef=function(){for(var a=0;a<this.tabs.length;a++)if(this.tabs[a].active)return a;return-1},d.prototype._equaliseHeights=function(){var b=0;a.each(a.map(this.tabs,function(a){return b=Math.max(b,a.panel.css("minHeight","").height()),a.panel}),function(){this.css("minHeight",b)})},d.prototype._isInView=function(c){var d=a(b).scrollTop(),e=d+a(b).height(),f=c.offset().top;return f+c.height()<=e&&f>=d},d.prototype.activate=function(a,b){var c=jQuery.Event("tabs-activate"),d=this._getTab(a);d.disabled||this._openTab(c,d,!0,b||!0)},d.prototype.deactivate=function(a){var b=jQuery.Event("tabs-dectivate"),c=this._getTab(a);c.disabled||this._closeTab(b,c)},d.prototype.enable=function(a){var b=this._getTab(a);b&&(b.disabled=!1,b.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),b.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},d.prototype.disable=function(a){var b=this._getTab(a);b&&(b.disabled=!0,b.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),b.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},d.prototype.getState=function(){return this.state},d.prototype.startRotation=function(b){var c=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var a=jQuery.Event("rotate");c._openTab(a,c._getTab(c._getNextTabRef()),!0)},b||(a.isNumeric(c.options.rotate)?c.options.rotate:4e3))},d.prototype.stopRotation=function(){b.clearInterval(this.rotateInterval),this.rotateInterval=0},d.prototype.option=function(a,b){return b&&(this.options[a]=b),this.options[a]},a.fn.responsiveTabs=function(b){var e,f=arguments;return b===c||"object"==typeof b?this.each(function(){a.data(this,"responsivetabs")||a.data(this,"responsivetabs",new d(this,b))}):"string"==typeof b&&"_"!==b[0]&&"init"!==b?(e=a.data(this[0],"responsivetabs"),"destroy"===b&&a.data(this,"responsivetabs",null),e instanceof d&&"function"==typeof e[b]?e[b].apply(e,Array.prototype.slice.call(f,1)):this):void 0}}(jQuery,window);